(window.webpackJsonppokemons=window.webpackJsonppokemons||[]).push([[0],{158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),s=a(73),c=a.n(s),l=(a(84),a(2)),i=a(3),m=a(5),u=a(4),p=a(6),d=a(26),h=a(78),f=a(7),b=a.n(f),v=a(16),g=function(){return r.a.createElement("div",{className:"d-flex justify-content-center mt-5"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},y=function(e){var t=e.pokemons,a=e.onItemClick,n=e.selectedItem;return t.length>0?r.a.createElement("ul",{className:"list-group mt-3"},t.map(function(e){return r.a.createElement("li",{key:e._id,className:n===e._id?"list-group-item active":"list-group-item",onClick:function(){return a(e._id)}},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("img",{src:e.image,className:"mr-3 rounded-circle bg-light",alt:e.name,width:"40"}),r.a.createElement("div",{className:"media-body"},r.a.createElement("h6",{className:"mt-0 mb-1"},e.name))))})):r.a.createElement("div",{className:"text-center my-5"},r.a.createElement("h4",null,"Nothing Found"))},O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("input",{className:"form-control form-control-lg",name:"s",type:"text",placeholder:"Search ...",onChange:function(t){return e.props.onChange(t)}})}}]),t}(n.Component),E=function(e){return r.a.createElement("span",{className:"btn btn-link",onClick:e.onLike},r.a.createElement("span",{className:e.liked?"fa fa-heart":"fa fa-heart-o"}))},j=a(74),k=a.n(j),w=a(27),N=a.n(w);N.a.defaults.baseURL="https://desolate-cliffs-31034.herokuapp.com/api",N.a.defaults.headers.common["x-auth-token"]=F(),N.a.interceptors.response.use(null,function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log("Loggin the error",e),alert("An unexpected error occurred")),Promise.reject(e)});var S={get:N.a.get,post:N.a.post,put:N.a.put,delete:N.a.delete},x="token",P={headers:{"Content-Type":"application/json; charset=UTF-8"}};function C(){return(C=Object(v.a)(b.a.mark(function e(t){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("/auth/",{email:t.email,password:t.password},P);case 2:a=e.sent,n=a.data,localStorage.setItem(x,n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(){try{var e=localStorage.getItem(x);return k()(e)}catch(t){return null}}function D(){return!!localStorage.getItem(x)}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"token";return localStorage.getItem(e)}var L={login:function(e){return C.apply(this,arguments)},logout:function(){localStorage.removeItem(x)},getCurrentUser:I,loginWithJwt:function(e){localStorage.setItem(x,e)},authenticated:D,getJwt:F};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return S.get("/pokemons/?"+e)}var _={headers:{"Content-Type":"application/json; charset=UTF-8"}};var U=a(75),B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",pokemon:[],loaded:!1,liked:!1},a.handleLike=function(){var e=Object(v.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D()||a.props.history.push({pathname:"/login",state:{from:a.props.history.locations}}),e.next=3,r=t,S.post("/favourites",{name:r.name,image:r.image,_id:r._id},_);case 3:200===e.sent.status&&((n=a.state.pokemon).liked=!n.liked,a.setState({pokemon:n}));case 5:case"end":return e.stop()}var r},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleDownload=function(){try{var e=new U.Parser(["name","weight","height"]).parse(a.state.pokemon),t=document.createElement("a");t.setAttribute("href","data:text/csv;charset=utf-8,%EF%BB%BF"+encodeURIComponent(e)),t.setAttribute("download",a.state.pokemon.name),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(n){console.error(n)}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(){var e=Object(v.a)(b.a.mark(function e(t){var a,n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id===this.state.pokemon._id){e.next=8;break}return this.setState({loaded:!1}),e.next=4,o=t.id,S.get("/pokemons/"+o);case 4:a=e.sent,n=a.data,this.setState({pokemon:n,loaded:!0}),D()&&this.state.pokemon.likes&&this.state.pokemon.likes.length&&((r=this.state.pokemon).liked=r.likes.includes(I()._id),this.setState({pokemon:r}));case 8:case"end":return e.stop()}var o},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.id,a=this.state,n=a.loaded,o=a.pokemon;return t?n?r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex align-items-center mb-3"},r.a.createElement("img",{src:o.image,className:"mr-3 rounded-circle bg-light",alt:o.name}),r.a.createElement("h1",null,o.name),r.a.createElement(E,{liked:o.liked,onLike:function(){return e.handleLike(o)}}),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-auto",onClick:this.handleDownload},"Download")),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},"Height ",r.a.createElement("span",{className:"badge badge-primary float-right"},o.height)),r.a.createElement("li",{className:"list-group-item"},"Wight ",r.a.createElement("span",{className:"badge badge-primary float-right"},o.weight," ")),r.a.createElement("li",{className:"list-group-item"},"Base Experience ",r.a.createElement("span",{className:"badge badge-secondary float-right"},o.base_experience," ")))):r.a.createElement(g,null):r.a.createElement("div",{className:"center"},r.a.createElement("small",null,"Please Select a pokemon!"))}}]),t}(n.Component),R=function(e){var t=e.favourites;e.onChange;return r.a.createElement("div",{className:"custom-control custom-switch mt-2"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customSwitch1",onChange:t}),r.a.createElement("label",{className:"custom-control-label",for:"customSwitch1"},"My Favourites"))},T=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={pokemons:[],loaded:!1,selectedItem:"",fillter:{name:"",favourites:!1}},a.handleItemClick=function(e){a.setState({selectedItem:e})},a.handleSearch=function(e){var t=a.state.fillter.name=e.target.value;a.setState({state:t}),a.fetchPokemons()},a.handleFillterFavourites=function(){var e=a.state.fillter,t=e.favourites=!e.favourites;a.setState({state:t}),a.fetchPokemons()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPokemons();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchPokemons",value:function(){var e=Object(v.a)(b.a.mark(function e(){var t,a,n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loaded:!1}),(t=Object.assign({},this.state.fillter)).favourites||delete t.favourites,""===t.name&&delete t.name,a=Object.entries(t).map(function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];return"".concat(a,"=").concat(n)}).join("&"),e.next=7,A(a);case 7:n=e.sent,r=n.data,this.setState({pokemons:r,loaded:!0});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.pokemons,n=t.loaded,o=t.selectedItem,s=t.fillter;return r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-md-6 p-5 bg-light"},r.a.createElement(O,{value:s.search,onChange:function(t){return e.handleSearch(t)}}),D()?r.a.createElement(R,{favourites:this.handleFillterFavourites}):"",n?r.a.createElement(y,{pokemons:a,onItemClick:this.handleItemClick,selectedItem:o}):r.a.createElement(g,null)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"position-fixed details p-5"},r.a.createElement(B,{id:o,history:this.props.history}))))}}]),t}(n.Component),W=function(e){var t=e.user;return r.a.createElement("div",{className:" d-flex flex-column flex-md-row align-items-center p-3 px-md-4 bg-white border-bottom shadow-sm  sticky-top "},r.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},r.a.createElement(o.b,{to:"/"},"[ - Pokemons - ]")),r.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/login",className:"p-2 text-dark"},"Login"),r.a.createElement(o.b,{to:"/register",className:"p-2 text-dark"},"Register")),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/login",className:"p-2 text-dark"},t.name),r.a.createElement(o.b,{to:"/logout",className:"p-2 text-dark"},"Logout"))))},J=a(25),M=a(23),H=a.n(M),V=function(e){var t=e.name,a=e.label,n=e.type,o=e.value,s=e.onChange,c=e.error;return r.a.createElement("div",{className:"from-group"},r.a.createElement("label",{htmlFor:"email"},a),r.a.createElement("input",{name:t,value:o,onChange:s,type:n,className:"form-control"}),c&&r.a.createElement("div",{className:"alert alert-danger"},c))};function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach(function(t){Object(J.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var z=a(23),G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},errors:{}},a.validate=function(){var e=z.validate(a.state.data,a.schema,{abortEarly:!1}).error;if(!e)return null;var t={},n=!0,r=!1,o=void 0;try{for(var s,c=e.details[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;t[l.path[0]]=l.message}}catch(i){r=!0,o=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return t},a.validateProperty=function(e){var t=e.name,n=e.value,r=Object(J.a)({},t,n),o=Object(J.a)({},t,a.schema[t]),s=z.validate(r,o).error;return console.log(s),s?s.details[0].message:null},a.handleSubmit=function(e){e.preventDefault();var t=a.validate();a.setState({errors:t||{}}),t||a.doSubmit()},a.handleChange=function(e){var t=e.currentTarget,n=q({},a.state.erros),r=a.validateProperty(t);r?n[t.name]=r:delete n[t.name];var o=q({},a.state.data);o[t.name]=t.value,a.setState({data:o,errors:n})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"renderButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Submit";return r.a.createElement("button",{className:"btn btn-primary mt-4",disabled:this.validate()},e)}},{key:"renderInput",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=this.state,o=n.data,s=n.errors;return r.a.createElement(V,{label:e,name:t,type:a,value:o[t],onChange:this.handleChange,error:s[t]})}}]),t}(n.Component),K={headers:{"Content-Type":"application/json; charset=UTF-8"}};function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach(function(t){Object(J.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:{name:"",email:"",password:""},errors:{}},a.schema={name:H.a.string().label("Name"),email:H.a.string().email({minDomainSegments:2}).label("Email"),password:H.a.string().label("Password")},a.doSubmit=Object(v.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=a.state.data,S.post("/users",{name:r.name,email:r.email,password:r.password},K);case 3:t=e.sent,L.loginWithJwt("token",t.headers["x-auth-token"]),window.location="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&((n=X({},a.state.errors)).email=e.t0.response.data,a.setState({errors:n}));case 11:case"end":return e.stop()}var r},e,null,[[0,8]])})),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return L.getCurrentUser()?r.a.createElement(d.a,{to:"/"}):r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("Name","name","name"),this.renderInput("Email","email","email"),this.renderInput("Password","password","password"),this.renderButton())}}]),t}(G),Z=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("main",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-3"},r.a.createElement("div",{className:"card mt-5 bg-light"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h1",null,"Register Now"),r.a.createElement(Y,{history:this.props.history}))))))}}]),t}(n.Component),ee=function(){return"Nothign found"};function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach(function(t){Object(J.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},errors:{}},a.schema={email:H.a.string().email({minDomainSegments:2}).label("Email"),password:H.a.string().label("Password")},a.doSubmit=Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.login(a.state.data);case 3:window.location="/",e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&((t=ae({},a.state.errors)).email=e.t0.response.data,a.setState({errors:t}));case 9:case"end":return e.stop()}},e,null,[[0,6]])})),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return L.getCurrentUser()?r.a.createElement(d.a,{to:"/"}):r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("Email","email","email"),this.renderInput("Password","password","password"),this.renderButton("Login"))}}]),t}(G),re=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.props.history),r.a.createElement("main",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-3"},r.a.createElement("div",{className:"card mt-5 bg-light"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h1",null,"Login Now"),r.a.createElement(ne,{history:this.props.history}))))))}}]),t}(n.Component),oe=(a(156),a(157),a(158),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){L.logout(),window.location="/"}},{key:"render",value:function(){return null}}]),t}(n.Component));console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_URL:"https://desolate-cliffs-31034.herokuapp.com/api"}));var se=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:""},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=L.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{user:this.state.user}),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login",component:re}),r.a.createElement(d.b,{path:"/register",component:Z}),r.a.createElement(d.b,{path:"/logout",component:oe}),r.a.createElement(d.b,{path:"/not-found",component:ee}),r.a.createElement(d.b,{path:"/",exact:!0,component:T}),r.a.createElement(d.a,{to:"/not-found"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,null,r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,t,a){e.exports=a(159)},84:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.f10a92be.chunk.js.map